# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Workflow / Architecture

[ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ](#-Ñ€ÑƒÑÑĞºĞ°Ñ-Ğ²ĞµÑ€ÑĞ¸Ñ) | [ğŸ‡¬ğŸ‡§ English Version](#-english-version)

---

## ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ

### ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram User  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TELEGRAM TRIGGER                         â”‚
â”‚  ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (Ñ‚ĞµĞºÑÑ‚ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ğ»Ğ¾Ñ)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   OWNER VERIFICATION                         â”‚
â”‚  ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: ID === 331119294 (Ğ²Ğ°Ñˆ ID)                        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚ âœ… Authorized                        âŒ Unauthorized â”‚
     â”‚                                                      â”‚
     â–¼                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEXT OR VOICE?  â”‚                          â”‚ UNAUTHORIZED MESSAGE â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                          â”‚ "â›” Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ       â”‚
     â”‚        â”‚                               â”‚ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾             â”‚
     â”‚        â”‚                               â”‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"      â”‚
     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ ğŸ¤ Voice          ğŸ“ Text
     â”‚                       â”‚
     â–¼                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  GET FILE    â”‚             â”‚
â”‚ (Telegram)   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
       â”‚                     â”‚
       â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  TRANSCRIBE  â”‚             â”‚
â”‚  (Whisper)   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
       â”‚                     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   TYPING     â”‚
          â”‚  INDICATOR   â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI CALENDAR AGENT                         â”‚
â”‚                    (GPT-4.1-mini)                            â”‚
â”‚                                                              â”‚
â”‚  Components:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. OpenAI Chat Model (GPT-4.1-mini)                  â”‚  â”‚
â”‚  â”‚ 2. Memory Buffer (10 messages context)               â”‚  â”‚
â”‚  â”‚ 3. Tools:                                             â”‚  â”‚
â”‚  â”‚    â€¢ Create Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Get Events                                       â”‚  â”‚
â”‚  â”‚    â€¢ Update Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Delete Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Get Timezone (HTTP Request)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GOOGLE CALENDAR API                             â”‚
â”‚  â€¢ Create/Update/Delete/Query events                        â”‚
â”‚  â€¢ Timezone detection                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SEND TEXT MESSAGE                              â”‚
â”‚  ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Telegram                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    âš ï¸ ERROR HANDLING âš ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ERROR TRIGGER â†’ ERROR NOTIFICATION â†’ Telegram              â”‚
â”‚  Ğ›ÑĞ±Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ² workflow Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ñƒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

#### 1. Telegram Trigger
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.telegramTrigger`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `updates`: `["message"]` - Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
- `webhookId`: ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ webhook

**Ğ’Ñ‹Ñ…Ğ¾Ğ´:**
```json
{
  "message": {
    "chat": {
      "id": 331119294
    },
    "text": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00",
    "voice": {
      "file_id": "..." // ĞµÑĞ»Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ
    }
  }
}
```

---

#### 2. Owner Verification (Switch)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.switch`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğ¿Ğ¾ Telegram ID

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
```javascript
if ($json.message.chat.id === "331119294") {
  // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚: "boss" â†’ Text or Voice?
} else {
  // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚: "unauthorized" â†’ Unauthorized Message
}
```

**Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:**
- âœ… Whitelist Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ·Ñ€ĞµÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ ID)
- âœ… Ğ’ÑĞµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ rejection message
- âœ… ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ½ĞµÑĞ°Ğ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Calendar API

---

#### 3. Text or Voice? (Switch)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.switch`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ° Ğ²Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
```javascript
if ($json.message.voice.file_id exists) {
  // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚: "Voice" â†’ Get a file
} else {
  // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚: "Text" â†’ Typing Indicator
}
```

---

#### 4. Get a file (Telegram)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.telegram`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¸Ğ· Telegram

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `resource`: `"file"`
- `fileId`: `={{ $json.message.voice.file_id }}`

**Ğ’Ñ‹Ñ…Ğ¾Ğ´:** Binary data (OGG Ğ°ÑƒĞ´Ğ¸Ğ¾ Ñ„Ğ°Ğ¹Ğ»)

---

#### 5. Transcribe a recording (OpenAI Whisper)
**Ğ¢Ğ¸Ğ¿:** `@n8n/n8n-nodes-langchain.openAi`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.8

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑ‡Ğ¸ Ğ² Ñ‚ĞµĞºÑÑ‚

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `resource`: `"audio"`
- `operation`: `"transcribe"`

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:** Whisper API (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ ÑĞ·Ñ‹Ğº)

**Ğ’Ñ‹Ñ…Ğ¾Ğ´:**
```json
{
  "text": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² Ğ¿ÑÑ‚Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ»ÑŒ Ğ½Ğ¾Ğ»ÑŒ"
}
```

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ:** ~$0.006 Ğ·Ğ° Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ Ğ°ÑƒĞ´Ğ¸Ğ¾

---

#### 6. Typing Indicator (Telegram)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.telegram`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ "Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ°ĞµÑ‚..." Ğ¿Ğ¾ĞºĞ° AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `operation`: `"sendChatAction"`
- `chatId`: `={{ $('Telegram Trigger').item.json.message.chat.id }}`

**UX ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ:**
- âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚, Ñ‡Ñ‚Ğ¾ Ğ±Ğ¾Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
- âœ… ĞĞµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)

---

#### 7. Calendar AI Agent ğŸ§ 
**Ğ¢Ğ¸Ğ¿:** `@n8n/n8n-nodes-langchain.agent`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ·Ğ³ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ - Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

**Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```javascript
$if(
  $('Transcribe a recording').isExecuted,
  $('Transcribe a recording').item.json.text,
  $('Telegram Trigger').item.json.message.text
)
```
*Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ ĞµÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ±Ñ‹Ğ» Ğ³Ğ¾Ğ»Ğ¾Ñ, Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚*

**System Prompt (ÑĞ¾ĞºÑ€Ğ°Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
You are a professional calendar management assistant integrated with Google Calendar via Telegram.

Core Capabilities:
- Create calendar events with smart date/time parsing
- Retrieve events by date range or search criteria
- Update existing events (title, time, description)
- Delete events safely with confirmation

Critical Rules:
1. Current time: {{ $now }}
2. Parse natural language: "tomorrow at 3pm", "next Monday 10:00"
3. Always confirm ambiguous times with user
4. Use ISO 8601 format for API calls
5. Response in Russian language
6. Use emojis: ğŸ“… âœ… âŒ ğŸ” â° ğŸ—“ï¸
...
```

**ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
1. **Language Model:** GPT-4.1-mini
2. **Memory:** Buffer Window (10 messages)
3. **Tools:** 5 Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ‘Ğ¼

---

#### 7.1 OpenAI Chat Model
**Ğ¢Ğ¸Ğ¿:** `@n8n/n8n-nodes-langchain.lmChatOpenAi`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `model`: `"gpt-4.1-mini"`

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:**
- **Context window:** 128K tokens
- **Output:** 16K tokens max
- **Cost:** ~$0.15 / 1M input tokens, ~$0.60 / 1M output tokens
- **Latency:** ~1-3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
- **Capabilities:** Function calling, structured outputs

---

#### 7.2 Simple Memory (Buffer Window)
**Ğ¢Ğ¸Ğ¿:** `@n8n/n8n-nodes-langchain.memoryBufferWindow`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ° Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `sessionIdType`: `"customKey"`
- `sessionKey`: `"331119294"` (Ğ²Ğ°Ñˆ Telegram ID)
- `contextWindowLength`: `10` (ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)

**ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
```
User: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00
Bot: âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ» ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ½Ğ° Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00

User: ĞŸĞµÑ€ĞµĞ½ĞµÑĞ¸ ĞµÑ‘ Ğ½Ğ° 16:00  // "ĞµÑ‘" = Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
Bot: âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ğ» ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ½Ğ° 16:00  // AI Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
```

**Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ:** SQLite Ğ² n8n (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)

---

#### 7.3 Tools (Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ AI Agent)

##### Tool 1: Create an event in Google Calendar
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.googleCalendarTool`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ (Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ÑÑ‚ÑÑ AI Ğ¸Ğ· Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°):**
```javascript
{
  calendar: "acandaurov@gmail.com",
  start: $fromAI('Start', ``, 'string'),      // "2025-01-02T15:00:00"
  end: $fromAI('End', ``, 'string'),          // "2025-01-02T16:00:00"
  summary: $fromAI('Summary', ``, 'string'),  // "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ ĞĞ½Ğ½Ğ¾Ğ¹"
  useDefaultReminders: $fromAI('Use_Default_Reminders', ``, 'boolean')
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ° AI:**
```json
{
  "tool": "Create an event in Google Calendar",
  "arguments": {
    "Start": "2025-01-02T15:00:00+03:00",
    "End": "2025-01-02T16:00:00+03:00",
    "Summary": "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ ĞĞ½Ğ½Ğ¾Ğ¹",
    "Use_Default_Reminders": true
  }
}
```

---

##### Tool 2: Get many events in Google Calendar
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.googleCalendarTool`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞ¾Ğ¸ÑĞº Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¿Ğ¾ ĞºÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸ÑĞ¼

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  operation: "getAll",
  calendar: "acandaurov@gmail.com",
  limit: 10,
  timeMin: $fromAI('After', ``, 'string'),   // "2025-01-01T00:00:00"
  timeMax: $fromAI('Before', ``, 'string'),  // "2025-01-07T23:59:59"
  fields: $fromAI('Fields', ``, 'string')    // Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²:**
- "Ğ§Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ Ğ½Ğ° ÑÑ‚Ğ¾Ğ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ?" â†’ `timeMin: Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ Ğ½ĞµĞ´ĞµĞ»Ğ¸, timeMax: ĞºĞ¾Ğ½ĞµÑ† Ğ½ĞµĞ´ĞµĞ»Ğ¸`
- "ĞĞ°Ğ¹Ğ´Ğ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ¼" â†’ AI ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ²ÑĞµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ, Ğ·Ğ°Ñ‚ĞµĞ¼ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸

---

##### Tool 3: Update an event in Google Calendar
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.googleCalendarTool`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** AI ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ "Get many events" Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ `eventId`, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  operation: "update",
  calendar: "acandaurov@gmail.com",
  eventId: $fromAI('Event_ID', ``, 'string'),  // Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ Get
  updateFields: {
    start: $fromAI('Start', ``, 'string'),
    end: $fromAI('End', ``, 'string'),
    summary: $fromAI('Summary', ``, 'string')
  }
}
```

**Workflow:**
1. User: "ĞŸĞµÑ€ĞµĞ½ĞµÑĞ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ ĞĞ½Ğ½Ğ¾Ğ¹ Ğ½Ğ° 16:00"
2. AI Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ "Get many events" â†’ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ID
3. AI Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ "Update event" Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼

---

##### Tool 4: Delete an event in Google Calendar
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.googleCalendarTool`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  operation: "delete",
  calendar: "acandaurov@gmail.com",
  eventId: $fromAI('Event_ID', ``, 'string')
}
```

**Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:** AI Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ´ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸ĞµĞ¼ (Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ğ² Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğµ)

---

##### Tool 5: HTTP Request (Get Timezone)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.httpRequestTool`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 4.3

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Google Calendar

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  url: "https://www.googleapis.com/calendar/v3/users/me/settings/timezone",
  authentication: "predefinedCredentialType",
  nodeCredentialType: "googleCalendarOAuth2Api"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "value": "Europe/Moscow"
}
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** AI Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

---

#### 8. Send a text message (Telegram)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.telegram`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  chatId: $('Telegram Trigger').item.json.message.chat.id,
  text: $json.output,  // Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğ¸Ğ· AI Agent
  additionalFields: {
    appendAttribution: false  // ÑƒĞ±Ğ¸Ñ€Ğ°ĞµÑ‚ "Powered by n8n"
  }
}
```

---

#### 9. Error Handling System

##### Error Trigger
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.errorTrigger`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ»ÑĞ±Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ workflow

**ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ² Ğ»ÑĞ±Ğ¾Ğ¼ ÑƒĞ·Ğ»Ğµ

---

##### Error Notification (Telegram)
**Ğ¢Ğ¸Ğ¿:** `n8n-nodes-base.telegram`  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ñƒ

**Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ:**
```
âŒ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°.

ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµÑ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.

[Ğ˜Ğ¼Ñ ÑƒĞ·Ğ»Ğ° Ğ³Ğ´Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°]

[Ğ¢ĞµĞºÑÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸]
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```javascript
{
  chatId: "331119294",  // Ğ²Ğ°Ñˆ ID
  text: `
    âŒ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°.
    
    {{ $json.execution.lastNodeExecuted }}
    
    {{ $json.execution.error.message }}
  `
}
```

---

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data Flow)

#### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00"

```
1. Telegram Trigger
   â†“ {message: {text: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00", chat: {id: 331119294}}}

2. Owner Verification
   â†“ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ID â†’ âœ… boss

3. Text or Voice?
   â†“ voice.file_id Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ â†’ Text

4. Typing Indicator
   â†“ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ "typing..." ÑÑ‚Ğ°Ñ‚ÑƒÑ

5. Calendar AI Agent
   â”œâ”€ OpenAI Chat Model
   â”‚  â†“ ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ + Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
   â”‚  â†“ ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚: Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
   â”‚  â†“ Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:
   â”‚     - Start: "2025-01-02T15:00:00"
   â”‚     - End: "2025-01-02T16:00:00" (default +1 Ñ‡Ğ°Ñ)
   â”‚     - Summary: "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ°"
   â”‚
   â”œâ”€ Memory Buffer
   â”‚  â†“ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°
   â”‚
   â””â”€ Tool: Create an event
      â†“ Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Google Calendar API
      â†“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
      â†“ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ AI

6. AI Agent Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚
   â†“ "âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ» ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ 'Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ°' Ğ½Ğ° Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00"

7. Send a text message
   â†“ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ² Telegram
```

---

#### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ğŸ¤ "Ğ§Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ?"

```
1. Telegram Trigger
   â†“ {message: {voice: {file_id: "ABC123..."}, chat: {id: 331119294}}}

2. Owner Verification
   â†“ âœ… boss

3. Text or Voice?
   â†“ voice.file_id ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ â†’ Voice

4. Get a file
   â†“ Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ OGG Ñ„Ğ°Ğ¹Ğ» Ğ¸Ğ· Telegram
   â†“ Binary data

5. Transcribe a recording
   â†“ Whisper API Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµÑ‚ Ğ² Ñ‚ĞµĞºÑÑ‚
   â†“ {text: "Ğ§Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ"}

6. Typing Indicator
   â†“ "typing..."

7. Calendar AI Agent
   â”œâ”€ AI Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚: Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
   â”œâ”€ AI Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ğ´Ğ°Ñ‚Ñ‹:
   â”‚  - timeMin: "2025-01-06T00:00:00"
   â”‚  - timeMax: "2025-01-12T23:59:59"
   â”‚
   â””â”€ Tool: Get many events
      â†“ Google Calendar API
      â†“ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹:
         [
           {summary: "Ğ¡Ğ¾Ğ²ĞµÑ‰Ğ°Ğ½Ğ¸Ğµ", start: "2025-01-06T15:00:00"},
           {summary: "Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº", start: "2025-01-08T10:30:00"},
           {summary: "Ğ”Ğ  ĞœĞ°ÑˆĞ¸", start: "2025-01-10T00:00:00"}
         ]

8. AI Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚:
   "ğŸ” ĞĞ°ÑˆÑ‘Ğ» 3 ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ:
    1. Ğ¡Ğ¾Ğ²ĞµÑ‰Ğ°Ğ½Ğ¸Ğµ - ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº, 6 ÑĞ½Ğ²Ğ°Ñ€Ñ Ğ² 15:00
    2. Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº - Ğ¡Ñ€ĞµĞ´Ğ°, 8 ÑĞ½Ğ²Ğ°Ñ€Ñ Ğ² 10:30
    3. Ğ”Ğ  ĞœĞ°ÑˆĞ¸ - ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ°, 10 ÑĞ½Ğ²Ğ°Ñ€Ñ (Ğ²ĞµÑÑŒ Ğ´ĞµĞ½ÑŒ)"

9. Send a text message
   â†“ Telegram
```

---

### ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

#### 1. Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²

AI Agent Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ `$fromAI()`:
```javascript
$fromAI('Parameter_Name', `default_value`, 'type')
```

**ĞšĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
- n8n Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ AI ÑÑ…ĞµĞ¼Ñƒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- AI Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¸Ğ· Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- n8n Ğ¿Ğ¾Ğ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ² Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ÑƒĞ·Ğ»Ğ°

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```
User: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ¼ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00 Ğ½Ğ° Ñ‡Ğ°Ñ"

AI Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚:
- Summary: "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ¼"
- Start: "2025-01-02T15:00:00"
- End: "2025-01-02T16:00:00"
```

---

#### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹:**

| Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | AI Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ¸Ñ€ÑƒĞµÑ‚ |
|---------------------|-------------------|
| "Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 3 Ñ‡Ğ°ÑĞ° Ğ´Ğ½Ñ" | "2025-01-02T15:00:00" |
| "Ñ‡ĞµÑ€ĞµĞ· 2 Ñ‡Ğ°ÑĞ°" | "2025-01-01T14:30:00" (Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ + 2 Ñ‡Ğ°ÑĞ°) |
| "Ğ² Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº ÑƒÑ‚Ñ€Ğ¾Ğ¼" | "2025-01-05T09:00:00" |
| "Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ" | timeMin: 2025-01-06, timeMax: 2025-01-12 |
| "Ğ²ĞµÑÑŒ Ğ´ĞµĞ½ÑŒ" | start: 00:00, end: 23:59 |

---

#### 3. ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹:**
```
User: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ ĞĞ½Ğ´Ñ€ĞµĞµĞ¼ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00
Bot: âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ» ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ ĞĞ½Ğ´Ñ€ĞµĞµĞ¼" Ğ½Ğ° Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 15:00

User: Ğ¡Ğ´ĞµĞ»Ğ°Ğ¹ ĞµÑ‘ Ğ½Ğ° Ñ‡Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¶Ğµ  // "ĞµÑ‘" = Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
Bot: âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ğ» ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ½Ğ° 16:00

User: Ğ ĞºÑ‚Ğ¾ Ñ‚Ğ°Ğ¼ Ğ±ÑƒĞ´ĞµÑ‚?  // ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½
Bot: Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ ĞĞ½Ğ´Ñ€ĞµĞµĞ¼, Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° Ğ² 16:00
```

**ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
1. Memory Buffer ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 10 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
2. AI Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ²ĞµÑÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ
3. AI Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑÑÑ‹Ğ»Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ/Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

---

#### 4. ĞœĞ½Ğ¾Ğ³Ğ¾ÑÑ‚Ğ°Ğ¿Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

**Update Ğ¸ Delete Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Event ID:**

```javascript
// Ğ¨Ğ°Ğ³ 1: AI Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
User: "ĞŸĞµÑ€ĞµĞ½ĞµÑĞ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ¼ Ğ½Ğ° 16:00"

// Ğ¨Ğ°Ğ³ 2: AI Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Get Events Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
Tool Call: Get many events
  - timeMin: Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ Ğ½ĞµĞ´ĞµĞ»Ğ¸
  - timeMax: ĞºĞ¾Ğ½ĞµÑ† Ğ½ĞµĞ´ĞµĞ»Ğ¸

// Ğ¨Ğ°Ğ³ 3: AI Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ "Ğ˜Ğ²Ğ°Ğ½"
Result: {id: "event123", summary: "Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° Ñ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ¼", ...}

// Ğ¨Ğ°Ğ³ 4: AI Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Update Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğ¼ ID
Tool Call: Update event
  - eventId: "event123"
  - start: "2025-01-02T16:00:00"
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‚ÑŒ ID ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
- âœ… AI Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½ÑƒĞ¶Ğ½Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
- âœ… Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ÑĞ¼Ğ¸

---

### ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ

#### Latency (Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°)

| Ğ¢Ğ¸Ğ¿ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° | ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ |
|-------------|-----------|---------------|
| Ğ¢ĞµĞºÑÑ‚ â†’ ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ | Trigger â†’ Agent â†’ Send | ~2-3 ÑĞµĞº |
| Ğ¢ĞµĞºÑÑ‚ â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ | + Google Calendar API | ~3-5 ÑĞµĞº |
| Ğ“Ğ¾Ğ»Ğ¾Ñ â†’ ĞÑ‚Ğ²ĞµÑ‚ | + Get File + Whisper | ~5-8 ÑĞµĞº |
| Ğ“Ğ¾Ğ»Ğ¾Ñ â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ | + Ğ²ÑĞµ Ğ²Ñ‹ÑˆĞµ | ~7-10 ÑĞµĞº |
| Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (Update) | + Get Events + Update | ~5-8 ÑĞµĞº |

#### Rate Limits

| API | Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ | ĞšĞ°Ğº Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ |
|-----|-------|-------------------|
| Telegram Bot | 30 msg/sec | n8n Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ throttles |
| OpenAI GPT-4 | 10,000 RPM (Tier 1) | Error â†’ Error Notification |
| OpenAI Whisper | 50 RPM | Error â†’ Error Notification |
| Google Calendar | 1,000 req/100 sec/user | Error â†’ Error Notification |

#### Memory Limits

- **Context Window:** 10 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (configurable)
- **SQLite storage:** Ğ‘ĞµĞ·Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ğ¾ (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ² n8n)
- **Session ID:** Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Telegram ID (Ğ¾Ğ´Ğ¸Ğ½ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ = Ğ¾Ğ´Ğ½Ğ° ÑĞµÑÑĞ¸Ñ)

#### Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ½Ğ° 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹:** Ğ¡Ğ¼ĞµÑÑŒ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ñ… (80%) Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ… (20%) ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ |
|-----------|-----------|
| GPT-4.1-mini (800 Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ñ…) | ~$0.20 |
| Whisper (200 Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…, ~30 ÑĞµĞº ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ) | ~$0.60 |
| Google Calendar API | $0 (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾) |
| Telegram API | $0 (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾) |
| **Ğ˜Ñ‚Ğ¾Ğ³Ğ¾** | **~$0.80 / 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²** |

---

### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ

#### ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

1. **Telegram ID Whitelist:**
   - Hardcoded Ğ² "Owner Verification"
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ
   - ĞĞµÑ‚ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ° Ğ¾Ğ±Ğ¾Ğ¹Ñ‚Ğ¸ (ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ workflow)

2. **OAuth2 Ğ´Ğ»Ñ Google:**
   - Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² n8n credentials (encrypted)
   - Refresh token Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ
   - Scope Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Calendar API

3. **OpenAI API Key:**
   - Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² n8n credentials (encrypted)
   - ĞĞµ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ² JSON workflow
   - Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡Ğ° Ñ‡ĞµÑ€ĞµĞ· OpenAI dashboard

#### Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

| Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ | Ğ“Ğ´Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ | Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | Retention |
|--------|--------------|------------|-----------|
| Telegram messages | n8n execution logs | âŒ | 30 Ğ´Ğ½ĞµĞ¹ (Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ) |
| Conversation memory | SQLite (n8n) | âŒ | Ğ”Ğ¾ 10 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| Google Calendar events | Google Servers | âœ… (TLS) | ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾ |
| Voice recordings | Temporary (n8n) | âŒ | Ğ£Ğ´Ğ°Ğ»ÑÑÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ transcription |
| Transcriptions | OpenAI logs | âœ… | 30 Ğ´Ğ½ĞµĞ¹ (OpenAI policy) |

#### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸

âœ… **Do:**
- Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ Ñ€Ğ¾Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ API ĞºĞ»ÑÑ‡Ğ¸
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ environment variables Ğ´Ğ»Ñ sensitive data
- Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ 2FA Ğ½Ğ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ… (Telegram, Google, OpenAI)
- Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ execution logs Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ self-hosted n8n Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ

âŒ **Don't:**
- ĞĞµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ `.env` Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ² git
- ĞĞµ Ğ´ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ workflow JSON Ñ credentials
- ĞĞµ Ğ´Ğ°Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº n8n UI Ğ¿Ğ¾ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½Ğ¸Ğ¼
- ĞĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ production API ĞºĞ»ÑÑ‡Ğ¸ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

---

### Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

#### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Whitelist (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹)**
```javascript
// Owner Verification node
conditions: [
  { leftValue: $json.message.chat.id, rightValue: "331119294" },
  { leftValue: $json.message.chat.id, rightValue: "987654321" }  // Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
]
```

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Multi-user Ñ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑĞ¼Ğ¸**
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ mapping: `{telegram_id: google_calendar_email}`
- ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ AI Agent Ğ´Ğ»Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ
- Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Memory Buffers Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

#### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹**

1. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Google Calendar Tool:
   - Operation: `createReminder`

2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ System Prompt:
   ```
   - Create reminders X minutes before events
   ```

3. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğº AI Agent Ñ‡ĞµÑ€ĞµĞ· `ai_tool` connection

#### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
- **Notion:** Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ² Notion Database
- **Slack:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¾ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸ÑÑ…
- **Gmail:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğ¹ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°Ğ¼
- **Zoom:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ meeting links Ğ´Ğ»Ñ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½-ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

**ĞšĞ°Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:**
1. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ n8n node
2. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğº AI Agent ĞºĞ°Ğº tool
3. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ System Prompt Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ capabilities

---

## ğŸ‡¬ğŸ‡§ English Version

### General Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram User  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TELEGRAM TRIGGER                         â”‚
â”‚  Receives incoming messages (text or voice)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   OWNER VERIFICATION                         â”‚
â”‚  Check: ID === 331119294 (your ID)                          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚ âœ… Authorized                        âŒ Unauthorized â”‚
     â–¼                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEXT OR VOICE?  â”‚                          â”‚ UNAUTHORIZED MESSAGE â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                          â”‚ "â›” For personal     â”‚
     â”‚        â”‚                               â”‚ use only"           â”‚
     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ ğŸ¤ Voice          ğŸ“ Text
     â”‚                       â”‚
     â–¼                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  GET FILE    â”‚             â”‚
â”‚ (Telegram)   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
       â”‚                     â”‚
       â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  TRANSCRIBE  â”‚             â”‚
â”‚  (Whisper)   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
       â”‚                     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   TYPING     â”‚
          â”‚  INDICATOR   â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI CALENDAR AGENT                         â”‚
â”‚                    (GPT-4.1-mini)                            â”‚
â”‚                                                              â”‚
â”‚  Components:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. OpenAI Chat Model (GPT-4.1-mini)                  â”‚  â”‚
â”‚  â”‚ 2. Memory Buffer (10 messages context)               â”‚  â”‚
â”‚  â”‚ 3. Tools:                                             â”‚  â”‚
â”‚  â”‚    â€¢ Create Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Get Events                                       â”‚  â”‚
â”‚  â”‚    â€¢ Update Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Delete Event                                     â”‚  â”‚
â”‚  â”‚    â€¢ Get Timezone (HTTP Request)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GOOGLE CALENDAR API                             â”‚
â”‚  â€¢ Create/Update/Delete/Query events                        â”‚
â”‚  â€¢ Timezone detection                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SEND TEXT MESSAGE                              â”‚
â”‚  Send response to user via Telegram                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Component Details

*(Full English translation of architecture follows same structure as Russian version above)*

**Key Components:**
1. **Telegram Trigger** - Entry point for all user messages
2. **Owner Verification** - Telegram ID-based access control
3. **Text/Voice Detection** - Routes messages based on type
4. **Voice Transcription** - OpenAI Whisper speech-to-text
5. **AI Agent** - GPT-4.1-mini powered natural language processing
6. **Google Calendar Tools** - CRUD operations on calendar events
7. **Memory Buffer** - Maintains conversation context (10 messages)
8. **Error Handling** - Catches and notifies owner of any errors

---

### Performance Metrics

**Average Response Times:**
- Text query â†’ Simple response: 2-3 seconds
- Text query â†’ Create event: 3-5 seconds
- Voice message â†’ Response: 5-8 seconds
- Voice message â†’ Create event: 7-10 seconds

**Cost per 1000 requests:** ~$0.80
- GPT-4.1-mini: ~$0.20
- Whisper (20% voice): ~$0.60
- Google Calendar API: Free
- Telegram API: Free

---

### Security Features

âœ… Telegram ID whitelist  
âœ… OAuth2 for Google Calendar  
âœ… Encrypted credential storage in n8n  
âœ… No sensitive data in exported workflow JSON  
âœ… Error notifications to owner only

---

### Extensibility

**Add more users:** Modify Owner Verification whitelist  
**Add more tools:** Connect new n8n nodes to AI Agent  
**Integrate services:** Notion, Slack, Gmail, Zoom, etc.  
**Customize prompts:** Modify AI Agent system prompt

---

For full implementation details, see the Russian version above.

